<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cata-ventos da Lu√≠sa </title>
  <style>
    /* 
    ===== INSTRU√á√ïES PARA IMAGENS PNG =====
    Para adicionar suas imagens PNG:
    
    1. CATAVENTO: 
       Descomente e edite a linha na classe .pinwheel-blades:
       background-image: url('caminho/para/catavento.png');
    
    2. CORA√á√ÉO: 
       Descomente e edite a linha na classe .heart:
       background-image: url('caminho/para/coracao.png');
       
    3. Se usar imagens PNG, pode remover as propriedades de fallback
       (background, border-radius, :before, :after do cora√ß√£o)
    ========================================
    */
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
    }

    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(to bottom, #87CEEB 0%, #B0E0E6 50%, #98FB98 100%);
      min-height: 100vh;
      overflow: hidden;
      cursor: crosshair;
    }

    .game-container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    .game-header {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 1000;
      pointer-events: none;
    }

    .game-title {
      color: #ff6b9d;
      font-size: 1.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      margin-bottom: 10px;
    }

    .game-stats {
      display: flex;
      gap: 20px;
      justify-content: center;
    }

    .stat-box {
      background: rgba(255, 255, 255, 0.9);
      padding: 8px 16px;
      border-radius: 20px;
      border: 2px solid #ffd6e8;
      font-size: 1.1em;
      color: #ff6b9d;
      font-weight: bold;
    }

    /* Debug controls */
    .debug-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
    }

    .debug-btn {
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.9em;
      margin: 5px;
      font-family: inherit;
    }

    .debug-btn:hover {
      background: #cc3333;
    }

    .debug-btn.active {
      background: #44ff44;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Cata-vento - PNG direto */
    .pinwheel {
      position: absolute;
      width: 60px;
      height: 60px;
      cursor: pointer;
      z-index: 10;
      animation: fall linear;
    }

    .pinwheel-blades {
      width: 50px;
      height: 50px;
      margin: 5px auto;
      /* Removi background-image - adicione sua imagem PNG aqui */
      background-image: url('pinwheel.png'); 
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      position: relative;
      
    }

    /* Anima√ß√µes de rota√ß√£o bidirecionais */
    .spin-right {
      animation: spinRight 1s linear infinite;
    }

    .spin-left {
      animation: spinLeft 1s linear infinite;
    }

    @keyframes spinRight {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes spinLeft {
      from { transform: rotate(0deg); }
      to { transform: rotate(-360deg); }
    }

    @keyframes fall {
      from { top: -60px; }
      to { top: 100vh; }
    }

    /* Nuvem ruim */
    .bad-cloud {
      position: absolute;
      width: 60px;
      height: 40px;
      cursor: pointer;
      z-index: 10;
      animation: fall linear;
    }

    .cloud-shape {
      width: 50px;
      height: 25px;
      background: #666;
      border-radius: 25px;
      margin: 5px auto;
      position: relative;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .cloud-shape:before,
    .cloud-shape:after {
      content: '';
      position: absolute;
      background: #666;
      border-radius: 50%;
    }

    .cloud-shape:before {
      width: 20px;
      height: 20px;
      top: -10px;
      left: 10px;
    }

    .cloud-shape:after {
      width: 25px;
      height: 25px;
      top: -12px;
      right: 8px;
    }

    .lightning {
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      color: #FFD700;
      font-size: 1.2em;
      animation: flash 0.5s infinite alternate;
    }

    @keyframes flash {
      from { opacity: 0.7; }
      to { opacity: 1; }
    }

    /* Cora√ß√£o - PNG direto */
    .bonus-heart {
      position: absolute;
      width: 50px;
      height: 50px;
      cursor: pointer;
      z-index: 10;
      animation: fall linear;
    }

    .heart {
      width: 45px;
      height: 45px;
      margin: 2.5px auto;
      background-image: url('like.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      animation: heartPulse 1.2s ease-in-out infinite;
      position: relative;
      }
  

    

    

    /* Efeito de pulsar no cora√ß√£o */
    @keyframes heartPulse {
      0%, 100% { transform: rotate(-45deg) scale(1); }
      50% { transform: rotate(-45deg) scale(1.15); }
    }

    /* Efeito "poff" quando cora√ß√£o √© clicado */
    @keyframes poffEffect {
      0% { 
        transform: rotate(-45deg) scale(1);
        opacity: 1;
      }
      50% { 
        transform: rotate(-45deg) scale(1.8);
        opacity: 0.7;
      }
      100% { 
        transform: rotate(-45deg) scale(2.5);
        opacity: 0;
      }
    }

    .heart.poff {
      animation: poffEffect 0.6s ease-out forwards;
    }

    /* Efeitos */
    .effect {
      position: absolute;
      font-size: 2em;
      font-weight: bold;
      pointer-events: none;
      z-index: 100;
      animation: effectAnim 1s ease-out forwards;
    }

    @keyframes effectAnim {
      0% { transform: scale(0.5); opacity: 1; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1) translateY(-50px); opacity: 0; }
    }

    /* Modais */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      border: 3px solid #ffd6e8;
      max-width: 450px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal h2 {
      color: #ff6b9d;
      margin-bottom: 20px;
    }

    .btn {
      background: linear-gradient(45deg, #ff9bd2, #c589e8);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 15px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
      font-family: inherit;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: linear-gradient(45deg, #888, #666);
    }

    .name-input {
      width: 100%;
      padding: 12px;
      border: 3px solid #ffd6e8;
      border-radius: 15px;
      font-size: 1.1em;
      margin: 15px 0;
      text-align: center;
      font-family: inherit;
    }

    .ranking-list {
      text-align: left;
      margin: 20px 0;
    }

    .ranking-item {
      padding: 10px;
      margin: 5px 0;
      background: #f9f9f9;
      border-radius: 10px;
      border-left: 4px solid #ff6b9d;
    }

    .rules-text {
      text-align: left;
      margin: 20px 0;
      line-height: 1.6;
    }

    .rules-text h3 {
      color: #ff6b9d;
      margin: 15px 0 10px 0;
    }

    .tab-buttons {
      display: flex;
      margin-bottom: 20px;
    }

    .tab-btn {
      flex: 1;
      padding: 10px;
      background: #eee;
      border: none;
      cursor: pointer;
      border-radius: 0;
      font-family: inherit;
    }

    .tab-btn.active {
      background: #ff6b9d;
      color: white;
    }

    .tab-btn:first-child {
      border-radius: 10px 0 0 10px;
    }

    .tab-btn:last-child {
      border-radius: 0 10px 10px 0;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="game-container" id="gameContainer">
    <div class="game-header">
      <div class="game-title">Cata-ventos da Lu√≠sa - N√≠vel <span id="level">1</span></div>
      <div class="game-stats">
        <div class="stat-box">Score: <span id="score">0</span></div>
        <div class="stat-box">‚ù§Ô∏è Vidas: <span id="lives">3</span></div>
        <div class="stat-box">Combo: <span id="combo">0</span></div>
      </div>
    </div>

    <div class="debug-controls">
      <!-- <button class="debug-btn" id="debugBtn" onclick="toggleDebug()">Debug OFF</button> -->
      <button class="btn" onclick="showRankingModal()" style="font-size: 0.9em; padding: 8px 12px;">üìä Ranking / Regras</button>
    </div>
  </div>

  <!-- Modal de nome -->
  <div class="modal" id="nameModal">
    <div class="modal-content">
      <h2>üéÆ Digite seu nome</h2>
      <input type="text" id="nameInput" class="name-input" placeholder="Seu nome...">
      <br>
      <button class="btn" onclick="startGame()">Come√ßar!</button>
      <br>
      <button class="btn btn-secondary" onclick="showRankingModal()">üìä Ver Ranking / Regras </button>
    </div>
  </div>

  <!-- Modal de fim -->
  <div class="modal hidden" id="endModal">
    <div class="modal-content">
      <h2 id="endTitle">Game Over!</h2>
      <p id="endMessage"></p>
      <button class="btn" onclick="restart()">Jogar Novamente</button>
      <button class="btn" onclick="goHome()">Voltar ao Quiz</button>
      <button class="btn btn-secondary" onclick="showRankingModal()">üìä Ver Ranking</button>
    </div>
  </div>

  <!-- Modal de Ranking e Regras -->
  <div class="modal hidden" id="rankingModal">
    <div class="modal-content">
      <h2>üèÜ Ranking & Regras</h2>
      
      <div class="tab-buttons">
        <button class="tab-btn active" onclick="showTab('ranking')">üèÜ Ranking</button>
        <button class="tab-btn" onclick="showTab('rules')">üìã Regras</button>
      </div>

      <div id="rankingTab" class="tab-content active">
        <div id="rankingList" class="ranking-list">
          <!-- Rankings ser√£o inseridos aqui -->
        </div>
        <button class="btn btn-secondary" onclick="clearRanking()">üóëÔ∏è Limpar Ranking</button>
      </div>

      <div id="rulesTab" class="tab-content">
        <div class="rules-text">
          <h3>üéØ Objetivo</h3>
          <p>Clique nos cataventos coloridos que caem do c√©u para marcar pontos e avan√ßar de n√≠vel!</p>
          
          <h3>‚ö° Como Jogar</h3>
          <p>‚Ä¢ Clique nos <strong>cataventos coloridos</strong> para ganhar pontos</p>
          <p>‚Ä¢ Evite as <strong>nuvens com raios</strong> - elas tiram uma vida</p>
          <p>‚Ä¢ Colete <strong>cora√ß√µes rosa</strong> para ganhar vidas extras</p>
          <p>‚Ä¢ Fa√ßa combos clicando em sequ√™ncia para multiplicar pontos</p>
          
          <h3>üé™ Sistema de Pontos</h3>
          <p>‚Ä¢ Catavento normal: <strong>10 pontos</strong></p>
          <p>‚Ä¢ Combo 5x: <strong>+vida extra</strong></p>
          <p>‚Ä¢ A cada 5 n√≠veis: <strong>+vida extra</strong></p>
          <p>‚Ä¢ Catavento que passa: <strong>-5 pontos e -1 vida</strong></p>
          <p>‚Ä¢ Nuvem com raio: <strong>-1 vida e reset combo</strong></p>
          
          <h3>üìà Dificuldade</h3>
          <p>‚Ä¢ Objetos caem mais r√°pido a cada n√≠vel</p>
          <p>‚Ä¢ Mais nuvens ruins aparecem em n√≠veis altos</p>
          <p>‚Ä¢ Para subir de n√≠vel: <strong>N√≠vel √ó 15 pontos</strong></p>
          
          <h3>üèÜ Vidas</h3>
          <p>‚Ä¢ Inicie com <strong>3 vidas</strong></p>
          <p>‚Ä¢ M√°ximo de <strong>9 vidas</strong></p>
          <p>‚Ä¢ Game Over quando chegar a 0 vidas</p>
        </div>
      </div>

      <button class="btn" onclick="closeRankingModal()">Fechar</button>
    </div>
  </div>

  <script>
    console.log('üöÄ VERS√ÉO 2.0 CARREGADA!');
    
    let gameRunning = false;
    let score = 0;
    let lives = 3;
    let combo = 0;
    let level = 1;
    let playerName = '';
    let debugMode = false;

    // Configura√ß√µes de dificuldade
    const config = {
      getSpawnRate: (lvl) => Math.max(800, 2000 - (lvl * 80)),
      getFallSpeed: (lvl) => Math.max(3, 7 - (lvl * 0.2)),
      getBadChance: (lvl) => Math.min(0.25, lvl * 0.02),
      getHeartChance: () => 0.03
    };

    // Som
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(freq1, freq2, duration = 0.1) {
      try {
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        
        osc.connect(gain);
        gain.connect(audioContext.destination);
        
        osc.frequency.setValueAtTime(freq1, audioContext.currentTime);
        osc.frequency.exponentialRampToValueAtTime(freq2, audioContext.currentTime + duration);
        
        gain.gain.setValueAtTime(0.1, audioContext.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
        
        osc.start(audioContext.currentTime);
        osc.stop(audioContext.currentTime + duration);
      } catch(e) {
        console.log('Audio n√£o dispon√≠vel');
      }
    }

    function updateUI() {
      console.log('üéÆ NOVA VERS√ÉO - UI UPDATE:', { score, lives, combo, level });
      
      // For√ßar atualiza√ß√£o direta
      document.getElementById('score').textContent = score;
      document.getElementById('lives').textContent = lives;
      document.getElementById('combo').textContent = combo;
      document.getElementById('level').textContent = level;
      
      console.log('‚úÖ UI ATUALIZADA COM SUCESSO!');
    }

    function createEffect(x, y, text, color = '#FFD700') {
      const effect = document.createElement('div');
      effect.className = 'effect';
      effect.textContent = text;
      effect.style.left = x + 'px';
      effect.style.top = y + 'px';
      effect.style.color = color;
      effect.style.textShadow = `2px 2px 4px rgba(0,0,0,0.5)`;
      
      document.getElementById('gameContainer').appendChild(effect);
      
      setTimeout(() => effect.remove(), 1000);
    }

    function createPinwheel() {
      const pinwheel = document.createElement('div');
      pinwheel.className = 'pinwheel';
      pinwheel.style.left = Math.random() * (window.innerWidth - 60) + 'px';
      const fallDuration = config.getFallSpeed(level);
      pinwheel.style.animationDuration = fallDuration + 's';
      
      const direction = Math.random() > 0.5 ? 'spin-right' : 'spin-left';
      pinwheel.innerHTML = `<div class="pinwheel-blades ${direction}"></div>`;
      
      let wasClicked = false;
      
      // Click handler
      pinwheel.onclick = (e) => {
        if (!gameRunning || wasClicked) return;
        wasClicked = true;
        
        score += 10;
        combo++;
        
        playSound(800, 1200, 0.1);
        createEffect(e.clientX, e.clientY, `+10`);
        
        if (combo >= 5 && combo % 5 === 0) {
          createEffect(e.clientX + 30, e.clientY - 30, `${combo}x!`, '#FFD700');
        }
        
        if (combo === 20 || (combo > 20 && combo % 25 === 0)) {
          lives = Math.min(lives + 1, 9);
          createEffect(e.clientX, e.clientY - 50, '+1 ‚ù§Ô∏è', '#FF69B4');
        }
        
        checkLevelUp();
        updateUI();
        pinwheel.remove();
      };
      
      // Timer para catavento perdido
      setTimeout(() => {
        if (!wasClicked && gameRunning && pinwheel.parentNode) {
          console.log('üî• CATAVENTO PERDIDO! Antes:', { score, lives, combo });
          
          score = Math.max(0, score - 5);
          lives = Math.max(0, lives - 1);
          combo = 0;
          
          console.log('üî• CATAVENTO PERDIDO! Depois:', { score, lives, combo });
          
          updateUI();
          
          createEffect(window.innerWidth / 2, 150, '-5 pontos', '#FF4444');
          createEffect(window.innerWidth / 2, 190, '-1 ‚ù§Ô∏è', '#FF4444');
          
          if (lives <= 0) {
            endGame();
          }
          
          pinwheel.remove();
        }
      }, (fallDuration * 1000) + 1000);
      
      document.getElementById('gameContainer').appendChild(pinwheel);
    }

    function createBadCloud() {
      const cloud = document.createElement('div');
      cloud.className = 'bad-cloud';
      cloud.style.left = Math.random() * (window.innerWidth - 60) + 'px';
      cloud.style.animationDuration = (config.getFallSpeed(level) + 1) + 's';
      
      cloud.innerHTML = `
        <div class="cloud-shape"></div>
        <div class="lightning">‚ö°</div>
      `;
      
      cloud.onclick = (e) => {
        if (!gameRunning) return;
        
        lives--;
        combo = 0;
        playSound(200, 100, 0.3);
        createEffect(e.clientX, e.clientY, '-1 ‚ù§Ô∏è', '#FF4444');
        updateUI();
        cloud.remove();
        
        if (lives <= 0) {
          endGame();
        }
      };
      
      cloud.onanimationend = () => cloud.remove();
      
      document.getElementById('gameContainer').appendChild(cloud);
    }

    function createBonusHeart() {
      const heart = document.createElement('div');
      heart.className = 'bonus-heart';
      heart.style.left = Math.random() * (window.innerWidth - 50) + 'px';
      heart.style.animationDuration = (config.getFallSpeed(level) + 1.5) + 's';
      
      heart.innerHTML = `<div class="heart"></div>`;
      
      heart.onclick = (e) => {
        if (!gameRunning) return;
        
        const heartElement = heart.querySelector('.heart');
        heartElement.classList.add('poff');
        
        lives = Math.min(lives + 1, 9);
        playSound(1200, 800, 0.2);
        createEffect(e.clientX, e.clientY, '+1 ‚ù§Ô∏è', '#FF1744');
        updateUI();
        
        setTimeout(() => heart.remove(), 600);
      };
      
      heart.onanimationend = () => heart.remove();
      
      document.getElementById('gameContainer').appendChild(heart);
    }

    function spawnObjects() {
      if (!gameRunning) return;
      
      const rand = Math.random();
      const heartChance = config.getHeartChance();
      const badChance = config.getBadChance(level);
      
      if (rand < heartChance) {
        createBonusHeart();
      } else if (rand < heartChance + badChance) {
        createBadCloud();
      } else {
        createPinwheel();
      }
      
      const nextSpawn = config.getSpawnRate(level) + (Math.random() * 400 - 200);
      setTimeout(spawnObjects, Math.max(300, nextSpawn));
    }

    function checkLevelUp() {
      const required = level * 15;
      if (score >= required) {
        level++;
        
        if (level % 5 === 0) {
          lives = Math.min(lives + 1, 9);
          createEffect(window.innerWidth / 2, window.innerHeight / 2, `N√çVEL ${level}! +1 ‚ù§Ô∏è`, '#FFD700');
        } else {
          createEffect(window.innerWidth / 2, window.innerHeight / 2, `N√çVEL ${level}!`, '#FFD700');
        }
      }
    }

    function startGame() {
      const name = document.getElementById('nameInput').value.trim();
      if (!name) {
        alert('Digite seu nome!');
        return;
      }
      
      playerName = name;
      document.getElementById('nameModal').classList.add('hidden');
      
      gameRunning = true;
      score = 0;
      lives = 3;
      combo = 0;
      level = 1;
      
      updateUI();
      spawnObjects();
      
      try {
        audioContext.resume();
      } catch(e) {
        console.log('Audio n√£o dispon√≠vel');
      }
    }

    function endGame() {
      gameRunning = false;
      
      document.querySelectorAll('.pinwheel, .bad-cloud, .bonus-heart').forEach(obj => obj.remove());
      
      let title, message;
      if (level >= 10) {
        title = 'üëë LENDA!';
        message = `Incr√≠vel! Voc√™ chegou ao n√≠vel ${level}!`;
      } else if (level >= 7) {
        title = 'üåü EXCELENTE!';
        message = `Parab√©ns! N√≠vel ${level} √© impressionante!`;
      } else if (level >= 4) {
        title = 'üéâ MUITO BOM!';
        message = `Bom trabalho! Chegou ao n√≠vel ${level}!`;
      } else {
        title = 'üí™ TENTE NOVAMENTE!';
        message = `N√≠vel ${level}. Voc√™ pode melhorar!`;
      }
      
      document.getElementById('endTitle').textContent = title;
      document.getElementById('endMessage').innerHTML = `
        ${message}<br><br>
        <strong>Pontua√ß√£o:</strong> ${score}<br>
        <strong>N√≠vel:</strong> ${level}
      `;
      document.getElementById('endModal').classList.remove('hidden');
      
      saveScore();
    }

    function saveScore() {
      try {
        const rankings = JSON.parse(localStorage.getItem('pinwheelRankings') || '[]');
        
        const newScore = {
          nome: playerName,
          pontuacao: score,
          nivel: level,
          data: new Date().toLocaleString('pt-BR')
        };
        
        rankings.push(newScore);
        rankings.sort((a, b) => b.pontuacao - a.pontuacao);
        rankings.splice(10);
        
        localStorage.setItem('pinwheelRankings', JSON.stringify(rankings));
      } catch(e) {
        console.log('Erro ao salvar ranking');
      }
    }

    function loadRanking() {
      try {
        const rankings = JSON.parse(localStorage.getItem('pinwheelRankings') || '[]');
        const rankingList = document.getElementById('rankingList');
        
        if (rankings.length === 0) {
          rankingList.innerHTML = '<p style="text-align: center; color: #888;">Nenhum ranking ainda. Seja o primeiro!</p>';
          return;
        }
        
        rankingList.innerHTML = rankings.map((rank, index) => `
          <div class="ranking-item">
            <strong>${index + 1}¬∫ ${rank.nome}</strong><br>
            <small>Pontos: ${rank.pontuacao} ‚Ä¢ N√≠vel: ${rank.nivel}</small><br>
            <small style="color: #888;">${rank.data}</small>
          </div>
        `).join('');
      } catch(e) {
        document.getElementById('rankingList').innerHTML = '<p style="color: red;">Erro ao carregar ranking</p>';
      }
    }

    function clearRanking() {
      if (confirm('Tem certeza que deseja limpar todo o ranking?')) {
        localStorage.removeItem('pinwheelRankings');
        loadRanking();
      }
    }

    function showRankingModal() {
      loadRanking();
      document.getElementById('rankingModal').classList.remove('hidden');
    }

    function closeRankingModal() {
      document.getElementById('rankingModal').classList.add('hidden');
    }

    function showTab(tabName) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(tabName + 'Tab').classList.add('active');
      
      if (tabName === 'ranking') {
        loadRanking();
      }
    }

    // Debug Mode
    function toggleDebug() {
      debugMode = !debugMode;
      const btn = document.getElementById('debugBtn');
      
      if (debugMode) {
        btn.textContent = 'Debug ON';
        btn.classList.add('active');
        startAutoClick();
      } else {
        btn.textContent = 'Debug OFF';
        btn.classList.remove('active');
        stopAutoClick();
      }
    }

    let autoClickInterval;

    function startAutoClick() {
      autoClickInterval = setInterval(() => {
        if (!gameRunning) return;
        
        const pinwheels = document.querySelectorAll('.pinwheel');
        pinwheels.forEach(pinwheel => {
          const rect = pinwheel.getBoundingClientRect();
          const event = new MouseEvent('click', {
            clientX: rect.left + rect.width / 2,
            clientY: rect.top + rect.height / 2
          });
          pinwheel.dispatchEvent(event);
        });
        
        const hearts = document.querySelectorAll('.bonus-heart');
        hearts.forEach(heart => {
          const rect = heart.getBoundingClientRect();
          const event = new MouseEvent('click', {
            clientX: rect.left + rect.width / 2,
            clientY: rect.top + rect.height / 2
          });
          heart.dispatchEvent(event);
        });
      }, 100);
    }

    function stopAutoClick() {
      if (autoClickInterval) {
        clearInterval(autoClickInterval);
        autoClickInterval = null;
      }
    }

    function restart() {
      document.getElementById('endModal').classList.add('hidden');
      document.getElementById('nameModal').classList.remove('hidden');
      document.getElementById('nameInput').value = playerName || '';
      
      if (debugMode) {
        toggleDebug();
      }
    }

    function goHome() {
      window.location.href = '/';
    }

    // Eventos
    document.getElementById('nameInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') startGame();
    });

    window.addEventListener('beforeunload', () => {
      stopAutoClick();
    });
  </script>
</body>
</html>